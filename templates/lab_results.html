<!-- lab_results.html -->
 <h2 class="mt-3 text-secondary">Lab Results</h2>
<table class="table">
    <thead>
        <tr>
            <th>Date</th>
            <th>Test </th>
            <th>Value</th>
            <th>Unit</th>
        </tr>
    </thead>
    <tbody>
        {% for result in lab_results %}
        <tr>
            <td>{{ result.resource.formattedDate }}</td>

            {% if result.resource.code.coding[0].display is defined %}
               <td>{{ result.resource.code.coding[0].display }}</td>
            {% elif result.resource.code.text is defined %}
               <td>{{ result.resource.code.text }}</td>
            {% else %} 
                <td>Unknown test</td>  
            {% endif %}
            {% if result.resource.valueQuantity is defined %} 
                <td>
                {% if result.resource.valueQuantity.value is defined %}
                   {{ result.resource.valueQuantity.value }}
                {% else %}
                   N/A
                {% endif %}
                </td>
                <td>
                {% if result.resource.valueQuantity.unit is defined %}
                    {{ result.resource.valueQuantity.unit }}
                {% else %}
                    N/A
                {% endif %}
                </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
